{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#mint-metabolomics-integrator","title":"MINT - Metabolomics Integrator","text":"<p>MINT is a post-processing tool for liquid chromatography-mass spectrometry (LCMS) based metabolomics.  Metabolomics is the study of all metabolites (small chemical compounds) in a biological sample e.g. from bacteria or a human blood sample.  The metabolites can be used to define biomarkers used in medicine to find treatments for diseases or for the development of diagnostic tests  or for the identification of pathogens such as methicillin resistant Staphylococcus aureus (MRSA). </p> <p> Figure 1: Flowchart of MINT processing workflow. </p>"},{"location":"#quickstart","title":"Quickstart","text":"<p>Check out the Quickstart to jump right into it.</p>"},{"location":"#what-is-it-all-about","title":"What is it all about?","text":"<p>What problem is MINT solving? Check out the background section.</p>"},{"location":"background/","title":"Background","text":""},{"location":"background/#what-is-lcms","title":"What is LCMS?","text":"<p>A typical biological sample, such as human blood or agar with some kind of bacteria, can contain thousands of metabolites such as sugars, alcohols, amino acids, nucleotides and more. To meassure the composition of such a sample mass spectrometry can be used. </p> <p>However, many metabolites share exact masses with other metabolites and therefore would be undistiguishable in the mass spectrometer.  Therefore, compounds are sorted using column chromatography and spread out over time. The metabolites that enter the column at the same time interact with the column in different ways based on their specific stereochemistry.  These interactions let compounds move faster or slower through the column and therefore the compounds will elude at different times. That way various metabolites can be analysed successively over certain timeframe rather than simultaneously.</p> <p>The mass spectrometer that follows the chromatographic column meassures the masses given at each point in time and returns a time dependent spectrogram. An example of a LSMS meassurement is visualized in the following figure:</p> <p> Figure 1: A 2D-histogram of a MS1 recorded intensities taken over time span of 10 minutes. Shown are m/z values between 100 and 600 [Da/z].</p> <p>If we zoom into this figure to a very narrow band of masses the traces of individual metabolites can be observed. The trace of succinate (or succinic acid) is shown here: </p> <p> Figure 2: A zoom into the 2D histogram shown in figure 1. </p> <p>This illustrates how dense and precise the information in a LCMS messurement is. For comparison the M/Z value of an electron is 5.489e-4.</p>"},{"location":"background/#processing-lcms-data","title":"Processing LCMS data","text":"<p>After the data has been collected on a mass spectrometer (MS) and stored in a (usually) vendor specific format the data can be subjected to analysis. To process data with MINT the data has to be provided in an open format (mzML or mzXML).</p> <p>Instead of analysing the raw LCMS data it is common practise to deconvolute the data and sum up the signal of individual metabolites. The processed data should be proportional to the amount of metabolite in the sample.  However, the meassured intensities will not reflect the relative concentrations between different compounds, only between different samples. For example, due to different ion efficiences compound A might have a stronger signal than compound B even if the compound B is present at higher concentration. Therefore, the intensities can only be use to compare relative amounts.  To estimate absolute concentrations a calibration curve has to be created for every single metabolite.</p> <p>The binning transforms the semi-structured data into a structured format where each column stands for one particular metabolite. Often the data is normalized for each metabolite to reflect the relative intensities across multiple samples.  The structured data can then be subjected to common data anayses such as dimensionality reduction, or clustering analysis.</p> <p> Figure 3: Clustering analysis for a small set of metabolites across 12 different samples including 3 different pathogens (EC: E. coli, SA: S. aureus, CA: C. albicans).</p>"},{"location":"developer-notes/","title":"Developer Notes","text":"<pre><code>python3 setup.py sdist bdist_wheel\npython3 -m twine upload --repository ms-mint dist/ms*mint-*\n</code></pre>"},{"location":"developer-notes/#windows-executables","title":"Windows executables","text":"<pre><code>cd specfiles &amp;&amp; pyinstaller --noconfirm Mint.spec ..\\scripts\\Mint.py\n</code></pre>"},{"location":"developer-notes/#documentation-deployment","title":"Documentation deployment","text":"<pre><code>mkdocs build &amp;&amp; mkdocs gh-deploy\n</code></pre>"},{"location":"developer-notes/#example-nginx-config","title":"Example NGINX config","text":"<p>To run Mint on a remote server you need to setup a remote proxy. </p> <pre><code>server {\n    ...\n    location / {\n        proxy_pass              http://localhost:8080;\n        client_max_body_size    100G;\n        proxy_set_header        X-Forwarded-Proto https;\n        proxy_set_header        Host $host;\n    }\n}\n</code></pre>"},{"location":"gallery/","title":"Gallery","text":""},{"location":"gui/","title":"MINT GUI","text":""},{"location":"gui/#workspaces","title":"Workspaces","text":"<ul> <li>Add new workspaces</li> <li>Delete workspaces</li> <li>Activate workspace </li> </ul> <p>A workspace is a container for project files that is separated from other workspaces. Through workspaces it is possible to work on different projects simultaneously.  All files relevant for one workspace are stored in a corresponding sub-folder of <code>--data-dir</code>, which by default is the folder MINT in the users home directory.  The home directory is different on different platforms. Under Windows the default folder is: <code>C:/Users/&lt;username&gt;/MINT</code>.  The path to the active workspace is always displayed above the workspace tab.</p> <p>To activate a particular workspace the workspace has to be selected in the table and then the <code>ACTIVATE</code> button has to be clicked.  <code>DELETE</code> will display a popup window upon confirmation the selected workspace with all corresponding files on the harddrive in <code>--data-dir</code> will be removed. </p>"},{"location":"gui/#ms-files","title":"MS-files","text":"<ul> <li>Import mass spectrometry files (MS-file) in mzXML or mzML format</li> <li>Convert file to feather format (other formats will be removed)</li> <li>Remove MS-files from workspace</li> </ul> <p>Mass-Spec files (in mzML or mzXML format) can be added under the <code>MS-files</code> tab by drag and drop or by using the selection form.  Due to limitations of the Plotly-Dash framework only up to 10 files can be uploaded at a time. For larger projects, the files can simply  be copied manually into the ms-files subdirectory. This will be improved in future versions of MINT. </p> <p>To remove certain files the files have to be selected in the table and the <code>DELETE SELECTED FILES</code> has to be clicked.</p> <p>The files are converted to <code>feather</code> format which is based on Apache Arrow. It is a representation that allows faster read into memory. If files were added manually by copying into the ms-files subdirectory the files can be converted to feather format with the <code>CONVERT TO FEATHER</code> button. Note that mzXML and mzML files will be deleted after convertion. </p>"},{"location":"gui/#metadata","title":"Metadata","text":"<ul> <li>Select samples used for peak optimization by setting values in the column <code>PeakOpt</code> to <code>True</code>.</li> <li>Add batch labels to analyse for possible batch effects.</li> <li>Add labels to analyse for differences of different groups (e.g. treatment and control)</li> <li>Add types for different files e.g. biological sample, quality control sample, standards etc in order to include ore exclude certain types during analysis.</li> <li>Add other types of metadata. </li> </ul> <p>Metadata for the individual files can be edited in the <code>Metadata</code> tab. This data can be used to group results e.g. by batch or by label as well as types. You want to edit metadata table to:</p>"},{"location":"gui/#targetlists","title":"Targetlists","text":"<ul> <li>Import peaklist from CSV file or add new peaks manually</li> <li>Rename peaks definitions or change parameters</li> <li>Delete peak definitions</li> </ul> <p>Targetlists are collection of peak definitions for the extraction of MS intensities beloning to individual metabolites.  Targetlists can be provided as Excel or CSV files. Targetlists are explained in more detail here. Files can be uploaded via the drag and drop area or the selection tool. The targetlists can be edited in place or with the optimization tools.</p>"},{"location":"gui/#add-metabolites","title":"Add Metabolites","text":"<ul> <li>Search for metabolites from ChEBI three stars database</li> <li>Add selected metabolites to peaklist (without RT estimation)</li> </ul>"},{"location":"gui/#peak-optimization","title":"Peak Optimization","text":"<ul> <li>Optimize retention times for all peaks or individual peaks</li> <li>Preview all peakshapes with quality indicator</li> </ul> <p>Retention times (RT) depend on the experiment and the specific chromatographic column used.  Additionally, aging of the column leads to drifts in RT that have to be accounted for.  The tools in the peak optimization tab can be used to quickly review all  peak definitions in  the presently loaded peaklist. </p> <p></p> <p>The <code>GENERATE PEAK PREVIEWS</code> generates a preview of all peak definitions and plots the coresponding chromatograms for all files. The peaks can be reviewed and modified one by one with the interactive tool. <code>FIND CLOSED PEAKS</code> iterates through all peak definitions and identifes the closest peak with respect to the expected RT which is displayed as black vertical line.</p>"},{"location":"gui/#manual-interactive-peak-optimization","title":"Manual (interactive) peak optimization","text":"<ul> <li>Optimize individual peaks one by one</li> <li>Find bad peaks</li> <li>Remove peaks from peaklist</li> <li>Set expected retention time</li> </ul> <p>When a peak is selected in the drop down box the chromatograms for the particular mass windows using the peak width as defined in the peaklist is extracted and displayed. The current rt window is visualized as green box. <code>SET RT TO CURRENT VIEW</code> will set the rt_min and rt_max values  to the current view and updated the peaklist accordingly.</p>"},{"location":"gui/#processing","title":"Processing","text":"<ul> <li>Run MINT (apply the extraction protocol to all files in the workspace)</li> <li>Download results</li> <li>Reset results and start again</li> </ul> <p>When all peaks look good the data can be processed using <code>RUN MINT</code>. This will apply the current peaklist to the MS-files in the workspace and extract additional properties. When the results tables are present the results can be explored with the following tabs.  The generated results can be downloaded with the <code>DOWNLOAD</code> button.</p>"},{"location":"gui/#analysis","title":"Analysis","text":"<p>After running MINT the results can be downloaed or analysed using the provided tools. For quality control purposes histograms and boxplots can be generated in the  quality control tab. The interactive heatmap tool can be used to explore the results data after <code>RUN MINT</code> has been exectuted. The tool allows to explore the generated data in from of heatmaps.</p>"},{"location":"gui/#general-selection-elements","title":"General selection elements","text":"<ul> <li>Include/exclude file types (based on <code>Type</code> column in metadata)</li> <li>Include/exclude peak labels for analysis</li> <li>Set file sorting (e.g. by name, by batch etc.)</li> <li>Select group-by column for coloring and statistics</li> </ul>"},{"location":"gui/#heatmap","title":"Heatmap","text":"<p>The first dropdown menu allows to include certain file types e.g. biological samples rather than quality control samples. The second dropdown menu distinguishes the how the heatmap is generated. </p> <ul> <li>Normalized by biomarer: devide values by column maxium.</li> <li>Cluster: Cluster rows with hierachical clustering.  </li> <li>Dendrogram: Plots a dendrogram instead of row labels.</li> <li>Transpose: Switch columns and rows.</li> <li>Correlation: Calculate pearson correlation between columns.</li> <li>Show in new tab: The figure will be generated in a new independent tab. That way multiple heatmaps can be generated at the same time.</li> </ul>"},{"location":"gui/#correlation-of-scaled-peak_max","title":"Correlation of (scaled) peak_max","text":""},{"location":"gui/#distributions","title":"Distributions","text":"<ul> <li>Plot histograms</li> <li>Density distributions</li> <li>Boxplots</li> </ul> <p>The MS-files can be grouped based on the values in the metadata table. If nothing is selected the data will not be grouped in order to plot the overall distribution. The second dropdown menu allows to select one or multple kinds of graphs that  to generate. The third dropdown menu allows to include certain file types.  For example, the analysis can be limited to only the biological samples if such a  type has been defined in the type column of the metadata table. </p> <p>The checkbox can be used to create a dense view. If the box is unchecked the output will be visually grouped into an individual section for each metabolite.</p>"},{"location":"gui/#pca","title":"PCA","text":"<ul> <li>Perform Principal Component Analysis (PCA)</li> <li>Plot projections to first N principal components</li> <li>Contributions of original variables to each component.</li> </ul>"},{"location":"gui/#hierarchical-clustering","title":"Hierarchical clustering","text":""},{"location":"gui/#plotting","title":"Plotting","text":"<p>MINT comes with a flexible and powerful plotting interface that is based on the powerful Seaborn library.</p> <ul> <li>Bar plots</li> <li>Violin plots</li> <li>Boxen plot</li> <li>Scatter plots</li> <li>and more...</li> </ul> <p></p> <p></p> <p></p>"},{"location":"install/","title":"Installation","text":""},{"location":"install/#installation-with-pip-linux-macos-windows","title":"Installation with PIP (Linux, MacOS, Windows)","text":"<p>The latest release of the program can easily be installed  in a standard Python 3 (&gt;= 3.7) environment using the widely used package manager <code>pip</code>:</p> <pre><code>pip install ms-mint\n</code></pre> <p>Should download and install all necessary dependencies and Mint. Mint should then be available via <code>Mint.py</code></p>"},{"location":"install/#windows-installer","title":"Windows Installer","text":"<p>For Windows 10 a build is provided here.  The installer generates an icon in the windows start menu. There will be a terminal be shown,  with potentially some errors due to missing files which can be ignored. Give it some time until the server is running and then navigate to http://localhost:9999  in the browser.</p>"},{"location":"install/#start-mintpy","title":"Start <code>Mint.py</code>","text":"<p>After installation MINT can be started by running <code>Mint.py</code>.</p> <pre><code>Mint.py --help\nusage: Mint.py [-h] [--no-browser] [--version] [--data-dir DATA_DIR] [--debug] [--port PORT] [--serve-path SERVE_PATH]\n\nMINT frontend.\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --no-browser          do not start the browser\n  --version             print current version\n  --data-dir            target directory for MINT data\n  --debug               start MINT server in debug mode\n  --port                change the port\n  --serve-path          serve app at a different path e.g. '/mint/' to serve the app at 'localhost:9999/mint/'\n</code></pre> <p>If the browser does not open automatically open it manually and navigate to <code>http://localhost:9999</code>. The app's frontend is build using Plotly-Dash and runs locally in a browser. Thought, the Python functions provided can be imported and used in any Python project independently. The GUI is under active development and may be optimized in the future.</p>"},{"location":"install/#docker","title":"Docker","text":"<p>MINT is now available on DockerHub in containerized format. A container is a standard unit of software that packages up code and all its dependencies, so the application runs quickly and reliably from one computing environment to another. In contrast to a virtual machine (VM), a Docker container image is a lightweight, standalone, executable package of software that includes everything needed to run an application: code, runtime, system tools, system libraries and settings. This allows to run MINT on any computer that can run Docker.</p> <p>The following command can be used to pull the latest image from docker hub.</p> <pre><code>docker pull msmint/msmint:latest\n</code></pre> <p>The image can be started with:</p> <pre><code>docker run -p 9999:9999 -it msmint/msmint:latest  -v /data/:/data/\n</code></pre> <p>Then the tool is available in the browser at http://localhost:9999.</p>"},{"location":"install/#from-source","title":"From source","text":"<p>Here we use <code>conda</code> from the miniconda package to install dependencies in a virtual environment.</p> <pre><code>git clone https://github.com/soerendip/ms-mint\ncd ms-mint\n\nconda create -n ms-mint python=3.8\nconda activate ms-mint\npip setup.py install  # for regular install\npip install -e .  # for development\n</code></pre>"},{"location":"quickstart/","title":"Quickstart","text":""},{"location":"quickstart/#quickstart","title":"Quickstart","text":"<p>A demo server is available here. Be mindful, you share the server with others.</p> <p>Download the demo files from Google Drive and extract the archive.</p> <p>You will find two <code>csv</code> files and 12 <code>mzXML</code> and/or <code>mzML</code> files. </p> <ul> <li>A folder with 12 mass-spectrometry (MS) files from microbial samples. We have four files for each Staphylococcus aureus (SA), Escherichia coli (EC), and Candida albicans (CA). Each file belongs to one of four batches (B1-B4). </li> <li><code>MINT-metadata.csv</code> contains this information in tabular format. Setting up the metadata for your project is essential. </li> <li><code>MINT-targets.csv</code> contains the extraction lists. The identification of the metabolites has been done before, so we know where the metabolites appear in the MS data.</li> </ul>"},{"location":"quickstart/#1-open-the-mint-application-and-create-a-new-workspace-named-demo","title":"1. Open the MINT application and create a new workspace named DEMO.","text":"<p>At <code>workspaces</code> click on <code>CREATE WORKSPACE</code>. Type <code>DEMO</code> into the text field and click on <code>CREATE</code>.</p>"},{"location":"quickstart/#2-make-sure-the-demo-workspace-is-activated-indicated-by-a-blue-bullet-in-the-workspace-table","title":"2. Make sure the DEMO workspace is activated, indicated by a blue bullet in the workspace table.","text":""},{"location":"quickstart/#3-switch-to-ms-files-and-upload-the-12-ms-files","title":"3. Switch to <code>MS-Files</code> and upload the 12 MS files.","text":"<p>Wait until all files are uploaded.</p>"},{"location":"quickstart/#4-switch-to-metadata-and-upload-mint-metadatacsv","title":"4. Switch to <code>Metadata</code> and upload <code>MINT-metadata.csv</code>.","text":"<p>This file contains information about your samples. Setting up metadata is important and needs to be done with care. Your downstream analysis will benefit greatly from a good metadata table.</p> <ul> <li><code>PeakOpt</code> if True these files will be used in the peak optimization tab.</li> <li><code>Label</code> should be used to indicate the group of the sampe. E.g. treatment group vs control group.</li> <li><code>Batch</code> is the batch ID, for example the plate if samples come from multiple plates.</li> <li><code>Type</code> indicates the type for the sample. By default evertying is called <code>Biological Sample</code>, other meaningful labels are <code>Standard Sample</code> or <code>Quality Control</code>.</li> <li><code>Row</code> and <code>Column</code> indicate the location of the sample on the plate e.g. 1-12 and A-H for a 96-well plate.</li> <li><code>RunOrder</code> can contain the order 1-N in which the samples were processed.</li> <li>Add more columns if you need. You can download the file, add new columns with Excel, and upload the table again. </li> <li>Use the <code>action</code> to set multiple cell values at once. </li> </ul>"},{"location":"quickstart/#5-switch-to-targets-and-upload-mint-targetscsv","title":"5. Switch to <code>Targets</code> and upload <code>MINT-targets.csv</code>.","text":"<p>This is the data extraction protocol. This determines what data is extracted from the files. The same protocol is applied to all files. No fitting or peak optimization is done.  MINT therefore requires a very stable chromatographic column and stable retention times for all files in a workspace. </p>"},{"location":"quickstart/#6-switch-to-peak-optimization","title":"6. Switch to <code>Peak Optimization</code>","text":"<p>Switch the <code>File selection</code> to <code>Use all files</code>. Normally, especially for large datasets, you should select a small representative set of samples. The peak optimization takes longer the more files are used for it and the more targets are defined. 'Click on <code>UPDATE PEAK PREVIEWS</code>. </p> <p></p> <ul> <li>here you can see the shapes of the extracted peaks.</li> <li>optimize the retention time with the interactive tool.</li> <li>you can click on the image to load the data into the interactive tool or use the dropdown menu.</li> <li>highlight the prefered region (highlighted in green) and click on <code>SET RT TO CURRENT VIEW</code> to update the retention time window.</li> <li>the horizontal bar indicates how far away the selected window is from the <code>rt</code> reference value in the <code>Targets</code>.</li> </ul> <p></p> <ul> <li>if you are happy with the peak shapes you can proceed to <code>Processing</code>.</li> </ul>"},{"location":"quickstart/#6-switch-to-processing-and-start-the-data-extraction-with-run-mint","title":"6. Switch to <code>Processing</code> and start the data extraction with <code>Run MINT</code>","text":"<p>The extraction process is done when you get a green notification <code>Finished running MINT</code>. Now, you can download the results in long-format or the dense peak_max values.  The tidy format contains all results, while the <code>DENSE PEAK_MAX</code> only contians the <code>peak_max</code> values as a matrix. </p>"},{"location":"quickstart/#7-switch-to-analysis","title":"7. Switch to <code>Analysis</code>.","text":"<p>Once the results are generated the 'Heatmap<code>tab will show an interactive heatmap. You can change the size of the heatmap by changing your browser window and</code>UPDATE<code>the plot. The heatmap shows the</code>peak_max` values. The dropdown menu provides some options.</p>"},{"location":"quickstart/#8-switch-to-analysisplotting","title":"8. Switch to <code>Analysis/Plotting</code>","text":"<p>The plotting tool is very powerful, but requires some practise. It is a wrapper of the powerful seaborn API.  Let's create a few simple visualizations.</p> <p></p> <p>And click on <code>Update</code>. A very simple bar-graph is shown, and we will gradually make it more complex.  This simple bar graph shows the average <code>peak_max</code> value across the whole dataset for all targets. </p>"},{"location":"quickstart/#a-select-peak_label-for-the-x-axis","title":"a) select <code>peak_label</code> for the <code>X</code> axis.","text":""},{"location":"quickstart/#b-set-aspect-ratio-to-5","title":"b) set aspect-ratio to 5.","text":""},{"location":"quickstart/#c-select-logarithmic-y-scale-in-the-dropdown-options","title":"c) select <code>Logarithmic y-scale</code> in the dropdown options.","text":""},{"location":"quickstart/#d-click-on-update","title":"d) click on <code>UPDATE</code>.","text":""},{"location":"quickstart/#e-set-figure-height-to-15-and-aspect-ratio-to-2","title":"e) set figure height to <code>1.5</code> and aspect ratio to <code>2</code>.","text":""},{"location":"quickstart/#e-set-column-to-label","title":"e) set <code>Column</code> to <code>Label</code>.","text":""},{"location":"quickstart/#f-set-row-to-batch","title":"f) set <code>Row</code> to <code>Batch</code>.","text":"<p>This way you can look at the whole dataset at once, sliced by <code>Batch</code> and <code>Label</code></p>"},{"location":"quickstart/#exercise-try-to-create-the-following-plot","title":"Exercise: Try to create the following plot:","text":""},{"location":"targets/","title":"Target lists","text":"<p>A target list contains the definitions of peaks to be extracted in terms of retention time and mz value. The important parameters for MINT are <code>rt_min</code> and <code>rt_max</code>. The <code>rt</code> value is only used as an estimate and used for comparison. You should know, from former identification runs, at what retention time to expect a certain metabolite. This is what <code>rt</code> is for. For the final extraction process however <code>rt_min</code> and <code>rt_max</code> are used. Before you process the MS files, you should check that all targts have <code>rt_min</code> and <code>rt_max</code> properly set. </p>"},{"location":"targets/#target-list-format","title":"Target list format","text":"<p>The target list is the determining protocol for the data processing step. You can reproduce all results using this list as input. A target list can be provided as <code>csv</code> (comma separated values) or <code>xlsx</code> (Microsoft Excel) file. </p> <p>If the preaklist is provided as multi-sheet xlsx file the target list should be the first sheet.</p> <p>The input files contains a number of columns headers in the target list should contain:</p> <ul> <li>peak_label : A unique identifier such as the biomarker name or ID. Even if multiple peaklist files are used, the label have to be unique across all the files.</li> <li>mz_mean : The target mass (m/z-value) in [Da].</li> <li>mz_width : The width of the peak in the m/z-dimension in units of ppm. The window will be mz_mean +/- (mz_width * mz_mean * 1e-6). Usually, a values between 5 and 10 are used.</li> <li>rt : Estimated retention time in [min] (optional, see above).</li> <li>rt_min : The start of the retention time for each peak in [min].</li> <li>rt_max : The end of the retention time for each peak in [min].</li> <li>intensity_threshold : A threshold that is applied to filter noise for each window individually. Can be set to 0 or any positive value.</li> </ul>"},{"location":"targets/#example-file","title":"Example file","text":"<p>target.csv:</p> <pre><code>peak_label,mz_mean,mz_width,rt_min,rt_max,intensity_threshold\nBiomarker-A,151.0605,10,4.65,5.2,0\nBiomarker-B,151.02585,10,4.18,4.53,0\n</code></pre> <p>A template can be created using the GUI.</p>"}]}